<!DOCTYPE html>
<html>
<head>
	<title>Spritx</title>
	<meta charset="UTF-8"/>
	<style type="text/css">
		.box {
			margin: 100px auto 20px auto;
			width: 450px;
		}
		.word {
			margin-left: 100px;
			font-size: 24px;
			font-family: Consolas;
		}
		.red {
			color: red;
		}
		.marker {
			width: 132px;
			height: 10px;
			border-right: 1px solid black;
		}
	</style>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.js"></script>
	<script src="http://fgnass.github.io/spin.js/spin.min.js"></script>
		<script type="text/javascript">
         var SpritzSettings = {
                  clientId: "5ba714540fabf77dc",
                  redirectUri: "http://renatn.com/spritx/login_success.html",

   		};
	</script>
	<script id="spritzjs" type="text/javascript" src="http://sdk.spritzinc.com/js/1.0/js/spritz.min.js"></script>
	<script type="text/javascript">

		$(document).ready(function() {	

			var spritzController = new SPRITZ.spritzinc.SpritzerController();
			spritzController.attach($("#spritzer"));

			var spinner = new Spinner();
			$("#btn-start").click(function() {
				
				var url = $("#articleUrl").val();
				if (url.length == 0) {
					return;
				}
				

				var container = document.getElementById("spinContainer");
				spinner.spin(container);

				$.getJSON("https://www.readability.com/api/content/v1/parser?url="+ url +"&token=74e9c9a322e162f0dee87e8425ce209eeea0643e&callback=?", function (data) {
					var text = data.title + " " + $('<div />').html(data.content).text();					

					var locale = "en_us;";
		
					// Send to SpritzEngine to translate
					SpritzClient.spritzify(text, locale, function(spritzText){
						spritzController.startSpritzing(spritzText);
					}, function(error){
						alert("Unable to Spritz: " + error.message);
					});
					

	        	}).always(function() {spinner.stop()});

			});


		});
	</script>

</head>
<body>

	<div class="box">
		<p><div id="spritzer"></div><p>
		<form action="javascript:void(0);">
			<input type="text" placeholder="Enter article URL" id="articleUrl" size=45/>
			<button id="btn-start">Read</button>	
		</form>
	</div>

	<div id="spinContainer"></div>


	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-29178854-1', 'renatn.com');
	  ga('send', 'pageview');
	</script>

</body>
</html>